parameters:
    personal_apikey_user_provider.class: Hexaa\ApiBundle\Security\personalApiKey\PersonalApiKeyUserProvider
    personal_apikey_authenticator.class: Hexaa\ApiBundle\Security\personalApiKey\PersonalApiKeyAuthenticator
    master_secret_user_provider.class:   Hexaa\ApiBundle\Security\masterSecret\MasterSecretUserProvider
    master_secret_authenticator.class:   Hexaa\ApiBundle\Security\masterSecret\MasterSecretAuthenticator
    attribute_spec_by_user_and_id.class: Hexaa\ApiBundle\Validator\Constraints\AttributeSpecByUserAndIdValidator
services:
    hexaa.hook.hook_handler:
        class: Hexaa\ApiBundle\Hook\HookHandler
        arguments: [ %hexaa_master_secrets%, "@monolog.logger.error", "@doctrine.orm.entity_manager" ]
    hexaa.handler.entity_handler:
        class: Hexaa\ApiBundle\Handler\EntityHandler
        arguments: [ "@doctrine.orm.entity_manager", "@monolog.logger.error" ]
    personal_apikey_user_provider:
        class: %personal_apikey_user_provider.class%
        arguments: [@service_container, "@monolog.logger.login", "@monolog.logger.modification"]
    personal_apikey_authenticator:
        class:     %personal_apikey_authenticator.class%
        arguments: ["@personal_apikey_user_provider", "@security.http_utils", "@monolog.logger.login"]
    master_secret_user_provider:
        class: %master_secret_user_provider.class%
        arguments: [%hexaa_master_secrets%, "@monolog.logger.login"]
    master_secret_authenticator:
        class:     %master_secret_authenticator.class%
        arguments: ["@master_secret_user_provider", "@security.http_utils", "@monolog.logger.login"]
    hexaa.check_policy.action_listener:
        class: Hexaa\ApiBundle\EventListener\CheckPolicyListener
        arguments: [ "@doctrine.orm.entity_manager", "@monolog.logger.login", "@monolog.logger.error", "@monolog.logger.access", "@monolog.logger.modification", %hexaa_admins%, "@security.context", "@hexaa.hook.hook_handler", "@hexaa.handler.entity_handler" ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }
    validator.uniquie.valid_entityid:
        class: Hexaa\ApiBundle\Validator\Constraints\ValidEntityidValidator
        tags:
            - { name: validator.constraint_validator, alias: validentityid }
        arguments: [%hexaa_service_entityids%]
    validator.uniquie.invitation_has_valid_target:
        class: Hexaa\ApiBundle\Validator\Constraints\InvitationHasValidTargetValidator
        tags:
            - { name: validator.constraint_validator, alias: invitation_has_valid_target }
        arguments: [ @doctrine.orm.entity_manager, @security.context, %hexaa_admins% ]
    validator.uniquie.attribute_spec_by_user_and_id:
        class: %attribute_spec_by_user_and_id.class%
        tags:
            - { name: validator.constraint_validator, alias: attribute_spec_by_user_and_id }
        arguments: [ "@doctrine.orm.entity_manager", "@security.context" ]
    validator.uniquie.service_exists_and_wants_attribute:
        class: Hexaa\ApiBundle\Validator\Constraints\ServiceExistsAndWantsAttributeValidator
        tags:
            - { name: validator.constraint_validator, alias: service_exists_and_wants_attribute }
        arguments: [ "@doctrine.orm.entity_manager", "@security.context" ]
    validator.uniquie.principal_can_be_added_to_role:
        class: Hexaa\ApiBundle\Validator\Constraints\PrincipalCanBeAddedToRoleValidator
        tags:
            - { name: validator.constraint_validator, alias: principal_can_be_added_to_role }
        arguments: [ "@doctrine.orm.entity_manager", "@security.context" ]
    validator.uniquie.entitlement_can_be_added_to_role:
        class: Hexaa\ApiBundle\Validator\Constraints\EntitlementCanBeAddedToRoleValidator
        tags:
            - { name: validator.constraint_validator, alias: entitlement_can_be_added_to_role }
        arguments: [ "@doctrine.orm.entity_manager", "@security.context" ]
    validator.uniquie.entitlement_uri:
        class: Hexaa\ApiBundle\Validator\Constraints\EntitlementURIValidator
        tags:
            - { name: validator.constraint_validator, alias: entitlement_uri }
        arguments: [ %hexaa_entitlement_uri_prefix% ]
    validator.uniquie.manager_is_organization_member:
        class: Hexaa\ApiBundle\Validator\Constraints\ManagerIsOrganizationMemberValidator
        tags:
            - { name: validator.constraint_validator, alias: manager_is_organization_member }
    validator.uniquie.new_entitlement_pack_is_not_private:
        class: Hexaa\ApiBundle\Validator\Constraints\NewEntitlementPackIsEnabledAndNotPrivateValidator
        tags:
            - { name: validator.constraint_validator, alias: new_entitlement_pack_is_not_private }
        arguments: [ "@doctrine.orm.entity_manager", "@security.context" ]
    validator.uniquie.sp_contact_mail:
        class: Hexaa\ApiBundle\Validator\Constraints\SPContactMailValidator
        tags:
            - { name: validator.constraint_validator, alias: sp_contact_mail }
        arguments: [%hexaa_service_entityids%]
        